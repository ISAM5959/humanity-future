<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Корзина — CTRL+Z</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Jaro:wght@400&family=Inter:wght@400;500;600;700&family=Geologica:wght@400&display=swap" rel="stylesheet">
    <style>
        .cart { padding: 100px var(--container-padding) 80px; min-height: 60vh; }
        .cart__container { max-width: var(--container-max); margin: 0 auto; }
        .cart__title { font-size: 48px; font-weight: 700; margin-bottom: 40px; }
        .cart__empty { text-align: center; padding: 60px 0; }
        .cart__empty p { font-size: 18px; margin-bottom: 24px; opacity: 0.6; }
        .cart__items { display: flex; flex-direction: column; gap: 20px; margin-bottom: 40px; }
        .cart-item { display: grid; grid-template-columns: 100px 1fr auto auto; gap: 24px; align-items: center; background: var(--color-white); border: 1px solid var(--color-black); border-radius: 16px; padding: 20px; }
        .cart-item__image { width: 100px; height: 100px; background: #f5f5f5; border-radius: 12px; display: flex; align-items: center; justify-content: center; }
        .cart-item__image img { max-width: 80%; max-height: 80%; object-fit: contain; }
        .cart-item__info h3 { font-size: 18px; font-weight: 600; margin-bottom: 8px; }
        .cart-item__price { font-size: 20px; font-weight: 700; color: var(--color-teal); }
        .cart-item__remove { width: 40px; height: 40px; border: none; background: #f5f5f5; border-radius: 50%; cursor: pointer; font-size: 20px; transition: var(--transition); }
        .cart-item__remove:hover { background: var(--color-red); color: white; }
        .cart__total { display: flex; justify-content: space-between; align-items: center; padding: 24px; background: var(--color-white); border: 1px solid var(--color-black); border-radius: 16px; }
        .cart__total-label { font-size: 18px; }
        .cart__total-value { font-size: 32px; font-weight: 700; }
        .cart__actions { margin-top: 24px; display: flex; justify-content: flex-end; }
        @media (max-width: 768px) {
            .cart-item { grid-template-columns: 80px 1fr; }
            .cart-item__price, .cart-item__remove { grid-column: 2; }
        }
    </style>
</head>
<body class="body--cream">
    <!-- Header -->
    <header class="header header--static">
        <div class="header__container">
            <a href="index.html" class="header__logo">
                <span class="logo-text">CTRL<span class="logo-plus">+</span><span class="logo-z">Z</span></span>
            </a>
            <nav class="header__nav">
                <a href="catalog.html" class="nav__link">Каталог</a>
                <a href="collections.html" class="nav__link">Коллекции</a>
                <a href="contacts.html" class="nav__link">Контакты</a>
            </nav>
            <a href="cart.html" class="header__cart">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M6 2L3 6V20C3 20.5304 3.21071 21.0391 3.58579 21.4142C3.96086 21.7893 4.46957 22 5 22H19C19.5304 22 20.0391 21.7893 20.4142 21.4142C20.7893 21.0391 21 20.5304 21 20V6L18 2H6Z" stroke="black" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    <path d="M3 6H21" stroke="black" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    <path d="M16 10C16 11.0609 15.5786 12.0783 14.8284 12.8284C14.0783 13.5786 13.0609 14 12 14C10.9391 14 9.92172 13.5786 9.17157 12.8284C8.42143 12.0783 8 11.0609 8 10" stroke="black" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
            </a>
        </div>
    </header>

    <!-- Cart -->
    <section class="cart">
        <div class="cart__container">
            <h1 class="cart__title">Корзина</h1>
            <div id="cart-content">
                <!-- Dynamic content will be inserted here -->
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="footer">
        <div class="footer__container">
            <div class="footer__logo">
                <span class="logo-text">CTRL<span class="logo-plus">+</span><span class="logo-z">Z</span></span>
            </div>
            <div class="footer__links">
                <a href="catalog.html">Каталог</a>
                <a href="collections.html">Коллекции</a>
                <a href="contacts.html">Контакты</a>
            </div>
            <div class="footer__copy">
                <p>© 2026 CTRL+Z. Все права защищены.</p>
            </div>
        </div>
    </footer>

    <script>
        // Product images mapping
        const productImages = {
            '1': 'images/радио белое.png',
            '2': 'images/флип часы.png',
            '3': 'images/радио черное.png',
            '4': 'images/stul.png',
            '5': 'images/виниловый проигрыватель.png',
            '6': 'images/флип часы.png'
        };

        // Render cart
        function renderCart() {
            const cartContent = document.getElementById('cart-content');
            const cart = JSON.parse(localStorage.getItem('ctrlz_cart') || '[]');
            
            if (cart.length === 0) {
                cartContent.innerHTML = `
                    <div class="cart__empty">
                        <p>Корзина пуста</p>
                        <a href="catalog.html" class="btn btn--primary">Перейти в каталог</a>
                    </div>
                `;
                return;
            }
            
            let total = 0;
            let itemsHtml = '<div class="cart__items">';
            
            cart.forEach((item, index) => {
                const price = parseInt(item.price.replace(/\D/g, ''));
                total += price * item.quantity;
                const imageUrl = productImages[item.id] || 'images/радио белое.png';
                
                itemsHtml += `
                    <div class="cart-item">
                        <div class="cart-item__image">
                            <img src="${imageUrl}" alt="${item.title}">
                        </div>
                        <div class="cart-item__info">
                            <h3>${item.title}</h3>
                            <p>Количество: ${item.quantity}</p>
                        </div>
                        <div class="cart-item__price">${item.price}</div>
                        <button class="cart-item__remove" onclick="removeItem(${index})">×</button>
                    </div>
                `;
            });
            
            itemsHtml += '</div>';
            
            cartContent.innerHTML = `
                ${itemsHtml}
                <div class="cart__total">
                    <span class="cart__total-label">Итого:</span>
                    <span class="cart__total-value">${total.toLocaleString('ru-RU')} ₽</span>
                </div>
                <div class="cart__actions">
                    <button class="btn btn--primary btn--large" onclick="checkout()">Оформить заказ</button>
                </div>
            `;
        }
        
        function removeItem(index) {
            const cart = JSON.parse(localStorage.getItem('ctrlz_cart') || '[]');
            cart.splice(index, 1);
            localStorage.setItem('ctrlz_cart', JSON.stringify(cart));
            renderCart();
        }
        
        function checkout() {
            alert('Спасибо за заказ! Мы свяжемся с вами для подтверждения.');
            localStorage.removeItem('ctrlz_cart');
            renderCart();
        }
        
        // Initialize
        renderCart();
    </script>
</body>
</html>
